\chapter {Installer \LaTeX{}}\label{install}

\begin{intro}
    Avant de pouvoir se servir de \LaTeX{} (\XeLaTeX), il faut l'installer sur son ordinateur. Voici comment faire pour les systèmes d'exploitation courants\footnote{Merci à Brendan Chabannes pour la rédaction de la majeure partie de ce chapitre.}.
\end{intro}

\section{La notion de distribution}

En général, on n'installe pas \LaTeX{} tout seul, on installe une distribution \LaTeX{}. Une distribution est un ensemble de fichiers comprenant :
\begin{itemize}
\item les logiciels \TeX, \LaTeX, et généralement \XeLaTeX, mais aussi d'autres logiciels qui appartiennent à la  \forme{famille \TeX\footnote{Pour prendre une analogie avec les logiciels connus, quand vous installez Microsoft Office, vous installez non seulement Word, Excel et Powerpoint, mais aussi des logiciels utiles à ces derniers, par exemple pour tracer des organigrammes.}}, que nous verrons en temps voulu;
\item des fichiers permettant d'étendre les possibilités de \LaTeX : les packages et les classes;
\item de la documentation sur ces fichiers.
\end{itemize}

Il existe deux distributions courantes : TeX Live, qui se veut portable et est très adaptée pour MacOS X et Linux, et MikTeX pour Windows uniquement. L'objet de ce chapitre est donc d'expliquer comment installer ces distributions.

\section{Installer TeX Live sous Mac Os X}

La méthode la plus simple consiste à installer MacTeX\footnote{\url{http://www.tug.org/mactex/}}. Celle-ci comprend non seulement une version de TeX Live pour Mac, mais aussi des logiciels pour faciliter la rédaction avec \LaTeX{}.

Pour l'installer, il suffit de télécharger le fichier d'installation sur le site, en page d'accueil. Il s'agit d'un fichier \ext{zip}, qu'il faut le cas échéant décompresser. Dedans se trouve un fichier \ext{mpkg} : un double clic dessus suffit à lancer le logiciel d'installation. Il vaut mieux conserver les réglages standards d'installation.

Une fois l'installation effectuée, vous pouvez vous rendre dans le dossier \forme{TeX} du dossier \forme{Applications} de votre Mac.

Ce dossier comprend plusieurs applications :
\begin{glossaire}
\item[BibDesk]qui est un logiciel pour gérer les fichiers bibliographiques au format \ext{bib}\renvoi{bddbiblio}.
\item[Excalibur]qui est un logiciel de correction orthographique prévu pour reconnaître les commandes \LaTeX{}. Nous ignorons sa qualité, ne l'ayant pas essayé.
\item[LaTeXit]qui est un logiciel pour rédiger encore plus facilement des équations en \LaTeX{} et les exporter vers divers logiciels. Comme ce livre est l'un des rares sur \LaTeX{} à ne pas expliquer comment faire des équations avec, nous ne nous étendrons pas.
\item[TeXLive Utility]qui sert à mettre à jour les différents modules de \LaTeX{} : classes, packages, etc.\renvoi{majosX} 
\item[TeXworks et TeXShop]qui sont deux éditeurs de textes prévus pour \LaTeX. Choissisez l'un d'entre eux pour commencer en \LaTeX{}\renvoi{commencer}.
\end{glossaire}

En outre, un panneau de configuration, \enquote{Distribution TeX} est ajouté dans les Préférences Systèmes. Dans la plupart des cas, vous n'aurez pas à vous en servir. Il permet en effet de choisir entre plusieurs versions de la distribution (par exemple entre la version 2011 et la version 2012), ce qui est rarement nécéssaire.
\subsection{Les caractères \LaTeX sous Mac Os X}\label{claviermac}

Les claviers Apple n'indiquent pas directement les caractères spéciaux disponibles. Voici comment frapper la plupart des caractères nécessaires à l'utilisation de \LaTeX.

\begin{longtable}{|l|l|}
\hline
\headlongtable{Caractère} & \headlongtable{Frappe} \\
\hline
\endhead
\hline
\endfoot
\verb+\+ & \verb|⌥ + ⇧ + /| \\
\verb+{+ & \verb|⌥ + (|\\
\verb+}+ & \verb|⌥ + )|\\
\verb+[+ & \verb|⌥ + ⇧ + (| \\
\verb+]+ & \verb|⌥ + ⇧ + )| \\
\verb+|+ & \verb|⌥ + ⇧ + L|  \\
\verb+~+ & \verb|⌥ + N|  \\
\end{longtable}

Et pour les claviers de Suisse romande, en utilisant la barre supérieure de chiffres :


\begin{longtable}{|l|l|}
\hline
\headlongtable{Caractère} & \headlongtable{Frappe} \\
\hline
\endhead
\hline
\endfoot
\verb+\+ & \verb|⌥ + ⇧ + 7| \\
\verb+{+ & \verb|⌥ + 8|\\
\verb+}+ & \verb|⌥ + 9|\\
\verb+[+ & \verb|⌥ + ⇧ + 5| \\
\verb+]+ & \verb|⌥ + ⇧ + 6| \\
\verb+|+ & \verb|⌥ + ⇧ + 7|  \\
\verb+~+ & \verb|⌥ + N|  \\
\end{longtable}



\section{Installer TeX Live sous GNU/Linux}

La plupart du temps, les paquets TeX Live sont disponibles dans les dépôts de votre distribution. Néanmoins, la majeure partie des distributions GNU/Linux ne gèrent pas certains packages récents tels que Biber\footnote{Les choses sont toutefois en train d'évoluer : les prochaines versions de systèmes tels que Debian ou Ubuntu (respectivement nommées \emph{Wheezy} et \emph{Quantal Quetzal}) disposeront de TeX Live 2012 et de Biber.}. C'est pourquoi nous privilégierons l'installation à partir du programme que vous pouvez trouver sur le site de TeX Live.

Une installation complète une fois effectuée pèse environs trois giga-octets. Le temps passant et les mises à jour s'accumulant, il est recommandé d'avoir quatre giga-octets d'espace libre sur le disque dur.

\subsection{Au préalable}

Assurez-vous avant toute chose d'avoir le paquet \verb|perltk| installé sur votre système. Si vous ne le possédez pas, vous devrez lancer l'installation en ligne de commande uniquement.

À titre d'exemple, le paquet se nomme \forme{perl-tk} sous Debian et Ubuntu, \forme{perl-Tk-804} sous Fedora et ses dérivés.

Sous Ubuntu, par exemple, il existe un moyen très simple d'installer ce paquet : tapez \url{apt://perl-tk} dans la barre d'adresse de votre navigateur web Firefox.

Rendez-vous alors sur \url{http://tug.org/texlive/acquire-netinstall.html}. Choisissez  le fichier \emph{install-tl-unx.tar.gz}. Après son téléchargement,  décompressez-le puis rendez-vous dans le dossier nouvellement créé à l'aide d'un terminal, par exemple en tapant \verb|cd ~/Téléchargements/install-tl-*/|. Vous pouvez alors lancer l'installation en mode administrateur, par exemple ainsi :

\begin{bashcode}
sudo perl install-tl -gui wizard
\end{bashcode}
Cette commande lancera le programme d'installation de la distribution complète qui reconnaîtra automatiquement l'architecture de votre plate-forme.

\subsection{Installation et configuration}

Après avoir donné votre mot de passe, il vous suffira de suivre les étapes suivantes:

\begin{enumerate}
\item Cliquez simplement sur \forme{Suivant}.
\item Attendez que le téléchargement soit fini. Il vous faut choisir un dossier d'installation : choisissez de préférence un répertoire hors du système de base, comme \verb|/$HOME/texlive2012|\footnote{\forme{\$HOME} est une \emph{variable d'environnement}. Vous pourriez tout aussi bien taper \forme{/home/justin/} si votre nom d'utilisateur est \enquote{justin}.}.
\item Conservez A4 pour la taille de papier.
\item Cliquez sur Installer.
\item À la fin de l'installation, un message vous informera qu'il vous faut ajuster votre \forme{\$PATH}. Ouvrez le fichier \verb|~/.bashrc| (créez-le s'il n'existe pas), et ajoutez-y les lignes suivantes:\footnote{\forme{\$PATH} est une variable d'environnement qui permet au système de savoir où chercher les exécutables. TeX Live n'étant pas installé dans les dossiers par défaut, puisqu'il est étranger au système de base, c'est à vous de l'intégrer. Ajustez le champ entre guillemets selon le message qui s'affiche à l'écran, en prenant soin de finir par  \forme{:\$PATH}.}\\
  \begin{english}\verb|export PATH="/$HOME/texlive2012/bin/x86_64-linux:$PATH"|\end{english}
\end{enumerate}

L'installation est terminée. Vous pouvez fermer votre terminal pour que les modifications appliquées à votre \forme{\$PATH} soient prises en compte. 


\section{MiKTeX sous Windows}


Les systèmes Windows diffèrent considérablement des systèmes GNU/Linux et Mac OS X. Par conséquent, s'il est possible de faire une installation manuelle de la distribution TeX Live sous Windows, la procédure est fastidieuse et complexe.

C'est pourquoi nous nous tournerons vers une distribution consacrée exclusivement à Windows, qui automatise les tâches d'installation de la distribution \LaTeX{} et permet de gérer son installation en se conformant aux pratiques qui ont cours sur ce système. Cette distribution a pour nom MiKTeX. Son installateur est très complet: en plus d'une distribution \LaTeX{}, il installe aussi un logiciel graphique de mise à jour des paquets et un éditeur de texte.

\subsection{Installation}

Il faut se rendre sur la page de téléchargement de la distribution : \url{http://miktex.org/download}. Cliquez sur le texte \emph{Other downloads}. Choisissez le fichier \emph{Net Installer}, et non le \emph{Basic Installer}.

\begin{attention}
Vous remarquerez que des installateurs sont fournis pour les versions dites respectivement 32 bits et 64 bits de Windows. Si vous ne connaissez pas ces termes, veillez à choisir la version \emph{32 bits}. Cette dernière peut en effet s'exécuter sur les deux types de plate-formes, tandis que la réciproque n'est pas vraie. Si vous savez que vous disposez d'un système en 64 bits, vous pouvez choisir sans crainte l'installateur qui y correspond.
\end{attention}

Une fois l'installateur téléchargé sur votre ordinateur, un double-clic lance la procédure. Il faut d'abord accepter la licence du logiciel. Puis choisissez \enquote{Download MiKTeX}, et, à l'écran suivant, \enquote{Complete MiKTeX}.

Il vous est demandé de choisir une source de téléchargement. Préférez une source proche de votre domicile, donc pour un utilisateur habitant dans le Nord de la France, les serveurs français, anglais ou allemands font amplement l'affaire.

À l'étape suivante il faut choisir un répertoire de téléchargement. Choisissez de préférence un dossier qui se trouve dans \enquote{Mes Documents}, comme par exemple \begin{english}\verb|C:\Documents and Settings\Votre utilisateur\Mes documents\miktex|\end{english}. Lorsque vous avez achevé cette étape, l'installateur télécharge tous les composants dont il a besoin, vous avertit qu'il a terminé son travail, puis s'arrête.

Lancez-le alors une seconde fois. Mais au lieu de choisir \enquote{Download MiKTeX}, choisissez à présent \enquote{Install MiKTeX}, puis de nouveau \enquote{Basic MiKTeX}. Préférez alors une installation en tant qu'administrateur, pour tous les utilisateurs de l'ordinateur. Puis sélectionnez le dossier qui contient les composants ; dans notre exemple précédent, il s'agissait de \begin{english}\verb|C:\Documents and Settings\Votreutilisateur\Mes documents\miktex|\end{english}.

Conservez les choix par défaut sur les deux écrans suivants: ils sont corrects. Vous pouvez achever le processus.







\section{Mettre à jour les packages}\label{maj}

La plupart des packages sont listés sur  \url{http://www.ctan.org/tex-archive/} qui sert de dépôt pour tous les projets tournant autour de \TeX et \LaTeX. C'est  en général sur les serveurs du CTAN (\textenglish{\emph{Comprehensive TeX Archive Network}}) que les logiciels de mise à jour des packages vont chercher  ceux-ci.

\begin{plusloins}
	Pour être tenu au courant des nouveaux packages et des mises à jours des anciens packages, vous pouvez vous abonner à la liste \url{https://lists.dante.de/mailman/listinfo/ctan-ann}. 
\end{plusloins}

\begin{attention}
    Les mises à jour de la distribution TeX Live ne sont fournies que pour une période d'un an environ après sa sortie (généralement entre mai et juillet). Passé ce délai, lorsque vous tenterez de mettre à jour votre distribution TeX Live, vous trouverez un message de ce type :

    \begin{quotation}
/home/justin/texlive2011/bin/x86\_64-linux/tlmgr: The TeX Live versions supported by the repository\\
  (2012--2012)\\
do not include the version of the local installation\\
  (2011).  Goodbye.
    \end{quotation}
    
    ou bien
    
    \begin{quotation}
    TeX Live 2011 is frozen forever and will no
longer be updated.
	\end{quotation}

Dans un tel cas,  il vous faut soit installer une nouvelle version de la distribution TeX Live, en recommençant la procédure d'installation, soit continuer à utiliser l'ancienne qui ne reçoit plus de mises à jour. TeX Live est d'une grande stabilité, mais ce n'est pas nécessairement le cas de tous les packages que l'on peut être amené à utiliser. Si l'un des packages que vous utilisez est affecté d'un bug qui vous gêne, vous n'aurez d'autre choix que de mettre à niveau la distribution TeX Live. Dans le cas contraire, vous pouvez parfaitement vous contenter de l'ancienne version.
\end{attention}

\subsection{Sous Mac OS X}\label{majosX}

Pour mettre à jour les packages, le plus simple est d'utiliser le logiciel \forme{TeXLive Utility}, livré avec MacTeX. Une fois le logiciel ouvert, il suffit  de choisir l'onglet \forme{Manage Updates}, puis de sélectionner le package à mettre à jour --- s'il ne s'affiche pas, c'est qu'il est à jour --- avant de cliquer sur \forme{Update}. À noter qu'on peut aussi utiliser l'onglet \forme{Manage Packages} pour gérer l'installation de nouveaux packages.

\subsection{Sous Linux}

Il y a deux moyens de mettre à jour votre installation \LaTeX sous GNU/Linux.

\begin{enumerate}
\item Le premier moyen de mettre à jour simplement est d'utiliser \verb|tlmgr| dans un terminal. La commande permettant de tout mettre à jour est la suivante:
\verb|tlmgr update --self --all|. S'il s'avère nécessaire d'installer un nouveau paquet, il faut utiliser la commande \verb|tlmgr install paquet|.
\item Vous pouvez lancer l'interface graphique de gestion des paquets en tapant la commande \verb|tlmgr gui|.
\end{enumerate}

\subsection{Sous Windows}

Dans le menu Démarrer, vous trouvez une section nommée fort justement MiKTeX, suivie d'un numéro de version. Dans cette section, il y a notamment une sous-section consacrée à la \enquote{Maintenance} --- répondant au doux nom de \forme{Maintenance (Admin)} ---, dans laquelle vous avez accès à deux outils utiles: le gestionnaire de mises à jour de packages (\forme{Updates}), et le gestionnaire d'installation de nouveaux packages (\forme{Package Manager}).

Remarquez que la plupart du temps, vous n'aurez pas besoin d'installer explicitement un nouveau package. En effet, au moment de la compilation, MiKTeX détecte que vous sollicitez un composant qui n'est pas présent sur votre système et vous propose de l'installer.
